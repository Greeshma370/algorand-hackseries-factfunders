import{p as G,r as wr,g as Ht,B as ct}from"./index-yF_9KL-G.js";import{e as yr,a as vr,c as ie}from"./browser-C4DtWx8Q.js";var yt={},E={};Object.defineProperty(E,"__esModule",{value:!0});var Vt=E.getLocalStorage=E.getLocalStorageOrThrow=E.getCrypto=E.getCryptoOrThrow=Jt=E.getLocation=E.getLocationOrThrow=$t=E.getNavigator=E.getNavigatorOrThrow=E.getDocument=E.getDocumentOrThrow=E.getFromWindowOrThrow=E.getFromWindow=void 0;function z(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}E.getFromWindow=z;function Z(t){const e=z(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}E.getFromWindowOrThrow=Z;function Sr(){return Z("document")}E.getDocumentOrThrow=Sr;function kr(){return z("document")}E.getDocument=kr;function Mr(){return Z("navigator")}E.getNavigatorOrThrow=Mr;function Or(){return z("navigator")}var $t=E.getNavigator=Or;function Rr(){return Z("location")}E.getLocationOrThrow=Rr;function Er(){return z("location")}var Jt=E.getLocation=Er;function Ir(){return Z("crypto")}E.getCryptoOrThrow=Ir;function Ar(){return z("crypto")}E.getCrypto=Ar;function Tr(){return Z("localStorage")}E.getLocalStorageOrThrow=Tr;function Br(){return z("localStorage")}Vt=E.getLocalStorage=Br;Object.defineProperty(yt,"__esModule",{value:!0});var Gt=yt.getWindowMetadata=void 0;const Bt=E;function Cr(){let t,e;try{t=Bt.getDocumentOrThrow(),e=Bt.getLocationOrThrow()}catch{return null}function r(){const I=t.getElementsByTagName("link"),N=[];for(let q=0;q<I.length;q++){const T=I[q],j=T.getAttribute("rel");if(j&&j.toLowerCase().indexOf("icon")>-1){const o=T.getAttribute("href");if(o)if(o.toLowerCase().indexOf("https:")===-1&&o.toLowerCase().indexOf("http:")===-1&&o.indexOf("//")!==0){let h=e.protocol+"//"+e.host;if(o.indexOf("/")===0)h+=o;else{const g=e.pathname.split("/");g.pop();const l=g.join("/");h+=l+"/"+o}N.push(h)}else if(o.indexOf("//")===0){const h=e.protocol+o;N.push(h)}else N.push(o)}}return N}function s(...I){const N=t.getElementsByTagName("meta");for(let q=0;q<N.length;q++){const T=N[q],j=["itemprop","property","name"].map(o=>T.getAttribute(o)).filter(o=>o?I.includes(o):!1);if(j.length&&j){const o=T.getAttribute("content");if(o)return o}}return""}function i(){let I=s("name","og:site_name","og:title","twitter:title");return I||(I=t.title),I}function d(){return s("description","og:description","twitter:description","keywords")}const b=i(),S=d(),m=e.origin,O=r();return{description:S,url:m,icons:O,name:b}}Gt=yt.getWindowMetadata=Cr;var Fr=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var s=Array(t),i=0,e=0;e<r;e++)for(var d=arguments[e],b=0,S=d.length;b<S;b++,i++)s[i]=d[b];return s},Nr=function(){function t(e,r,s){this.name=e,this.version=r,this.os=s,this.type="browser"}return t}(),xr=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=G.platform}return t}(),Pr=function(){function t(e,r,s,i){this.name=e,this.version=r,this.os=s,this.bot=i,this.type="bot-device"}return t}(),qr=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Lr=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Wr=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,jr=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ct=3,Ur=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",Wr]],Ft=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Dr(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Lr:typeof navigator<"u"?Vr(navigator.userAgent):Jr()}function Hr(t){return t!==""&&Ur.reduce(function(e,r){var s=r[0],i=r[1];if(e)return e;var d=i.exec(t);return!!d&&[s,d]},!1)}function Vr(t){var e=Hr(t);if(!e)return null;var r=e[0],s=e[1];if(r==="searchbot")return new qr;var i=s[1]&&s[1].split(/[._]/).slice(0,3);i?i.length<Ct&&(i=Fr(i,Gr(Ct-i.length))):i=[];var d=i.join("."),b=$r(t),S=jr.exec(t);return S&&S[1]?new Pr(r,d,b,S[1]):new Nr(r,d,b)}function $r(t){for(var e=0,r=Ft.length;e<r;e++){var s=Ft[e],i=s[0],d=s[1],b=d.exec(t);if(b)return i}return null}function Jr(){var t=typeof G<"u"&&G.version;return t?new xr(G.version.slice(1)):null}function Gr(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}function vt(t){return Dr()}function St(){const t=vt();return t&&t.os?t.os:void 0}function zr(){const t=St();return t?t.toLowerCase().includes("android"):!1}function Kr(){const t=St();return t?t.toLowerCase().includes("ios")||t.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function Qr(){return St()?zr()||Kr():!1}function Xr(){const t=vt();return t&&t.name?t.name.toLowerCase()==="node":!1}function Yr(){return!Xr()&&!!Zr()}const Zr=$t,en=Jt,kt=Vt;function Nt(){return Gt()}function tn(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}function rn(t){return typeof t=="string"?t:JSON.stringify(t)}const nn=tn,sn=rn;function on(t,e){const r=sn(e),s=kt();s&&s.setItem(t,r)}function zt(t){let e=null,r=null;const s=kt();return s&&(r=s.getItem(t)),e=r&&nn(r),e}function Kt(t){const e=kt();e&&e.removeItem(t)}const xt="WALLETCONNECT_DEEPLINK_CHOICE",an=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],Qt=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"];var cn=wr();const un=Ht(cn);var dn=Mt;Mt.strict=Xt;Mt.loose=Yt;var hn=Object.prototype.toString,fn={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function Mt(t){return Xt(t)||Yt(t)}function Xt(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function Yt(t){return fn[hn.call(t)]}var ln=dn.strict,pn=function(e){if(ln(e)){var r=ct.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(r=r.slice(e.byteOffset,e.byteOffset+e.byteLength)),r}else return ct.from(e)};const gn=Ht(pn),Zt="hex",er="utf8",dt="0";function Y(t){return new Uint8Array(t)}function tr(t,e=!1){const r=t.toString(Zt);return e?ee(r):r}function mn(t){return t.toString(er)}function ht(t){return gn(t)}function Q(t,e=!1){return tr(ht(t),e)}function bn(t){return mn(ht(t))}function _n(t){return ct.from(V(t),Zt)}function X(t){return Y(_n(t))}function Ot(t){return ct.from(t,er)}function wn(t){return Y(Ot(t))}function yn(t,e=!1){return tr(Ot(t),e)}function vn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/))}function rr(...t){let e=[];return t.forEach(r=>e=e.concat(Array.from(r))),new Uint8Array([...e])}function Sn(t,e=8){const r=t%e;return r?(t-r)/e*e+e:t}function kn(t,e=8,r=dt){return Mn(t,Sn(t.length,e),r)}function Mn(t,e,r=dt){return Rn(t,e,!0,r)}function V(t){return t.replace(/^0x/,"")}function ee(t){return t.startsWith("0x")?t:`0x${t}`}function nr(t){return t=V(t),t=kn(t,2),t&&(t=ee(t)),t}function On(t){const e=t.startsWith("0x");return t=V(t),t=t.startsWith(dt)?t.substring(1):t,e?ee(t):t}function Rn(t,e,r,s=dt){const i=e-t.length;let d=t;return i>0&&(d=s.repeat(i)+t),d}function bt(t){return ht(new Uint8Array(t))}function En(t,e){return Q(new Uint8Array(t),!1)}function In(t){return Y(t).buffer}function An(t){return Ot(t)}function Tn(t,e){return yn(t,!0)}function Bn(t){return X(t).buffer}function sr(t,e){const r=V(nr(new un(t).toString(16)));return e?r:ee(r)}var ir={exports:{}};(function(t){(function(){var e="input is invalid type",r="finalize already called",s=typeof window=="object",i=s?window:{};i.JS_SHA3_NO_WINDOW&&(s=!1);var d=!s&&typeof self=="object",b=!i.JS_SHA3_NO_NODE_JS&&typeof G=="object"&&G.versions&&G.versions.node;b?i=globalThis:d&&(i=self);var S=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,m=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",O="0123456789abcdef".split(""),F=[31,7936,2031616,520093696],I=[4,1024,262144,67108864],N=[1,256,65536,16777216],q=[6,1536,393216,100663296],T=[0,8,16,24],j=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],o=[224,256,384,512],h=[128,256],g=["hex","buffer","arrayBuffer","array","digest"],l={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),m&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return typeof n=="object"&&n.buffer&&n.buffer.constructor===ArrayBuffer});for(var k=function(n,c,u){return function(f){return new x(n,c,n).update(f)[u]()}},B=function(n,c,u){return function(f,p){return new x(n,c,p).update(f)[u]()}},M=function(n,c,u){return function(f,p,w,y){return U["cshake"+n].update(f,p,w,y)[u]()}},W=function(n,c,u){return function(f,p,w,y){return U["kmac"+n].update(f,p,w,y)[u]()}},oe=function(n,c,u,f){for(var p=0;p<g.length;++p){var w=g[p];n[w]=c(u,f,w)}return n},It=function(n,c){var u=k(n,c,"hex");return u.create=function(){return new x(n,c,n)},u.update=function(f){return u.create().update(f)},oe(u,k,n,c)},mr=function(n,c){var u=B(n,c,"hex");return u.create=function(f){return new x(n,c,f)},u.update=function(f,p){return u.create(p).update(f)},oe(u,B,n,c)},br=function(n,c){var u=l[n],f=M(n,c,"hex");return f.create=function(p,w,y){return!w&&!y?U["shake"+n].create(p):new x(n,c,p).bytepad([w,y],u)},f.update=function(p,w,y,_){return f.create(w,y,_).update(p)},oe(f,M,n,c)},_r=function(n,c){var u=l[n],f=W(n,c,"hex");return f.create=function(p,w,y){return new lt(n,c,w).bytepad(["KMAC",y],u).bytepad([p],u)},f.update=function(p,w,y,_){return f.create(p,y,_).update(w)},oe(f,W,n,c)},At=[{name:"keccak",padding:N,bits:o,createMethod:It},{name:"sha3",padding:q,bits:o,createMethod:It},{name:"shake",padding:F,bits:h,createMethod:mr},{name:"cshake",padding:I,bits:h,createMethod:br},{name:"kmac",padding:I,bits:h,createMethod:_r}],U={},te=[],D=0;D<At.length;++D)for(var K=At[D],ae=K.bits,re=0;re<ae.length;++re){var ft=K.name+"_"+ae[re];if(te.push(ft),U[ft]=K.createMethod(ae[re],K.padding),K.name!=="sha3"){var Tt=K.name+ae[re];te.push(Tt),U[Tt]=U[ft]}}function x(n,c,u){this.blocks=[],this.s=[],this.padding=c,this.outputBits=u,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(n<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=u>>5,this.extraBytes=(u&31)>>3;for(var f=0;f<50;++f)this.s[f]=0}x.prototype.update=function(n){if(this.finalized)throw new Error(r);var c,u=typeof n;if(u!=="string"){if(u==="object"){if(n===null)throw new Error(e);if(m&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!m||!ArrayBuffer.isView(n)))throw new Error(e)}else throw new Error(e);c=!0}for(var f=this.blocks,p=this.byteCount,w=n.length,y=this.blockCount,_=0,P=this.s,v,A;_<w;){if(this.reset)for(this.reset=!1,f[0]=this.block,v=1;v<y+1;++v)f[v]=0;if(c)for(v=this.start;_<w&&v<p;++_)f[v>>2]|=n[_]<<T[v++&3];else for(v=this.start;_<w&&v<p;++_)A=n.charCodeAt(_),A<128?f[v>>2]|=A<<T[v++&3]:A<2048?(f[v>>2]|=(192|A>>6)<<T[v++&3],f[v>>2]|=(128|A&63)<<T[v++&3]):A<55296||A>=57344?(f[v>>2]|=(224|A>>12)<<T[v++&3],f[v>>2]|=(128|A>>6&63)<<T[v++&3],f[v>>2]|=(128|A&63)<<T[v++&3]):(A=65536+((A&1023)<<10|n.charCodeAt(++_)&1023),f[v>>2]|=(240|A>>18)<<T[v++&3],f[v>>2]|=(128|A>>12&63)<<T[v++&3],f[v>>2]|=(128|A>>6&63)<<T[v++&3],f[v>>2]|=(128|A&63)<<T[v++&3]);if(this.lastByteIndex=v,v>=p){for(this.start=v-p,this.block=f[y],v=0;v<y;++v)P[v]^=f[v];ne(P),this.reset=!0}else this.start=v}return this},x.prototype.encode=function(n,c){var u=n&255,f=1,p=[u];for(n=n>>8,u=n&255;u>0;)p.unshift(u),n=n>>8,u=n&255,++f;return c?p.push(f):p.unshift(f),this.update(p),p.length},x.prototype.encodeString=function(n){var c,u=typeof n;if(u!=="string"){if(u==="object"){if(n===null)throw new Error(e);if(m&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!m||!ArrayBuffer.isView(n)))throw new Error(e)}else throw new Error(e);c=!0}var f=0,p=n.length;if(c)f=p;else for(var w=0;w<n.length;++w){var y=n.charCodeAt(w);y<128?f+=1:y<2048?f+=2:y<55296||y>=57344?f+=3:(y=65536+((y&1023)<<10|n.charCodeAt(++w)&1023),f+=4)}return f+=this.encode(f*8),this.update(n),f},x.prototype.bytepad=function(n,c){for(var u=this.encode(c),f=0;f<n.length;++f)u+=this.encodeString(n[f]);var p=c-u%c,w=[];return w.length=p,this.update(w),this},x.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,c=this.lastByteIndex,u=this.blockCount,f=this.s;if(n[c>>2]|=this.padding[c&3],this.lastByteIndex===this.byteCount)for(n[0]=n[u],c=1;c<u+1;++c)n[c]=0;for(n[u-1]|=2147483648,c=0;c<u;++c)f[c]^=n[c];ne(f)}},x.prototype.toString=x.prototype.hex=function(){this.finalize();for(var n=this.blockCount,c=this.s,u=this.outputBlocks,f=this.extraBytes,p=0,w=0,y="",_;w<u;){for(p=0;p<n&&w<u;++p,++w)_=c[p],y+=O[_>>4&15]+O[_&15]+O[_>>12&15]+O[_>>8&15]+O[_>>20&15]+O[_>>16&15]+O[_>>28&15]+O[_>>24&15];w%n===0&&(ne(c),p=0)}return f&&(_=c[p],y+=O[_>>4&15]+O[_&15],f>1&&(y+=O[_>>12&15]+O[_>>8&15]),f>2&&(y+=O[_>>20&15]+O[_>>16&15])),y},x.prototype.arrayBuffer=function(){this.finalize();var n=this.blockCount,c=this.s,u=this.outputBlocks,f=this.extraBytes,p=0,w=0,y=this.outputBits>>3,_;f?_=new ArrayBuffer(u+1<<2):_=new ArrayBuffer(y);for(var P=new Uint32Array(_);w<u;){for(p=0;p<n&&w<u;++p,++w)P[w]=c[p];w%n===0&&ne(c)}return f&&(P[p]=c[p],_=_.slice(0,y)),_},x.prototype.buffer=x.prototype.arrayBuffer,x.prototype.digest=x.prototype.array=function(){this.finalize();for(var n=this.blockCount,c=this.s,u=this.outputBlocks,f=this.extraBytes,p=0,w=0,y=[],_,P;w<u;){for(p=0;p<n&&w<u;++p,++w)_=w<<2,P=c[p],y[_]=P&255,y[_+1]=P>>8&255,y[_+2]=P>>16&255,y[_+3]=P>>24&255;w%n===0&&ne(c)}return f&&(_=w<<2,P=c[p],y[_]=P&255,f>1&&(y[_+1]=P>>8&255),f>2&&(y[_+2]=P>>16&255)),y};function lt(n,c,u){x.call(this,n,c,u)}lt.prototype=new x,lt.prototype.finalize=function(){return this.encode(this.outputBits,!0),x.prototype.finalize.call(this)};var ne=function(n){var c,u,f,p,w,y,_,P,v,A,ce,ue,de,he,fe,le,pe,ge,me,be,_e,we,ye,ve,Se,ke,Me,Oe,Re,Ee,Ie,Ae,Te,Be,Ce,Fe,Ne,xe,Pe,qe,Le,We,je,Ue,De,He,Ve,$e,Je,Ge,ze,Ke,Qe,Xe,Ye,Ze,et,tt,rt,nt,st,it,ot;for(f=0;f<48;f+=2)p=n[0]^n[10]^n[20]^n[30]^n[40],w=n[1]^n[11]^n[21]^n[31]^n[41],y=n[2]^n[12]^n[22]^n[32]^n[42],_=n[3]^n[13]^n[23]^n[33]^n[43],P=n[4]^n[14]^n[24]^n[34]^n[44],v=n[5]^n[15]^n[25]^n[35]^n[45],A=n[6]^n[16]^n[26]^n[36]^n[46],ce=n[7]^n[17]^n[27]^n[37]^n[47],ue=n[8]^n[18]^n[28]^n[38]^n[48],de=n[9]^n[19]^n[29]^n[39]^n[49],c=ue^(y<<1|_>>>31),u=de^(_<<1|y>>>31),n[0]^=c,n[1]^=u,n[10]^=c,n[11]^=u,n[20]^=c,n[21]^=u,n[30]^=c,n[31]^=u,n[40]^=c,n[41]^=u,c=p^(P<<1|v>>>31),u=w^(v<<1|P>>>31),n[2]^=c,n[3]^=u,n[12]^=c,n[13]^=u,n[22]^=c,n[23]^=u,n[32]^=c,n[33]^=u,n[42]^=c,n[43]^=u,c=y^(A<<1|ce>>>31),u=_^(ce<<1|A>>>31),n[4]^=c,n[5]^=u,n[14]^=c,n[15]^=u,n[24]^=c,n[25]^=u,n[34]^=c,n[35]^=u,n[44]^=c,n[45]^=u,c=P^(ue<<1|de>>>31),u=v^(de<<1|ue>>>31),n[6]^=c,n[7]^=u,n[16]^=c,n[17]^=u,n[26]^=c,n[27]^=u,n[36]^=c,n[37]^=u,n[46]^=c,n[47]^=u,c=A^(p<<1|w>>>31),u=ce^(w<<1|p>>>31),n[8]^=c,n[9]^=u,n[18]^=c,n[19]^=u,n[28]^=c,n[29]^=u,n[38]^=c,n[39]^=u,n[48]^=c,n[49]^=u,he=n[0],fe=n[1],He=n[11]<<4|n[10]>>>28,Ve=n[10]<<4|n[11]>>>28,Oe=n[20]<<3|n[21]>>>29,Re=n[21]<<3|n[20]>>>29,nt=n[31]<<9|n[30]>>>23,st=n[30]<<9|n[31]>>>23,We=n[40]<<18|n[41]>>>14,je=n[41]<<18|n[40]>>>14,Be=n[2]<<1|n[3]>>>31,Ce=n[3]<<1|n[2]>>>31,le=n[13]<<12|n[12]>>>20,pe=n[12]<<12|n[13]>>>20,$e=n[22]<<10|n[23]>>>22,Je=n[23]<<10|n[22]>>>22,Ee=n[33]<<13|n[32]>>>19,Ie=n[32]<<13|n[33]>>>19,it=n[42]<<2|n[43]>>>30,ot=n[43]<<2|n[42]>>>30,Xe=n[5]<<30|n[4]>>>2,Ye=n[4]<<30|n[5]>>>2,Fe=n[14]<<6|n[15]>>>26,Ne=n[15]<<6|n[14]>>>26,ge=n[25]<<11|n[24]>>>21,me=n[24]<<11|n[25]>>>21,Ge=n[34]<<15|n[35]>>>17,ze=n[35]<<15|n[34]>>>17,Ae=n[45]<<29|n[44]>>>3,Te=n[44]<<29|n[45]>>>3,ve=n[6]<<28|n[7]>>>4,Se=n[7]<<28|n[6]>>>4,Ze=n[17]<<23|n[16]>>>9,et=n[16]<<23|n[17]>>>9,xe=n[26]<<25|n[27]>>>7,Pe=n[27]<<25|n[26]>>>7,be=n[36]<<21|n[37]>>>11,_e=n[37]<<21|n[36]>>>11,Ke=n[47]<<24|n[46]>>>8,Qe=n[46]<<24|n[47]>>>8,Ue=n[8]<<27|n[9]>>>5,De=n[9]<<27|n[8]>>>5,ke=n[18]<<20|n[19]>>>12,Me=n[19]<<20|n[18]>>>12,tt=n[29]<<7|n[28]>>>25,rt=n[28]<<7|n[29]>>>25,qe=n[38]<<8|n[39]>>>24,Le=n[39]<<8|n[38]>>>24,we=n[48]<<14|n[49]>>>18,ye=n[49]<<14|n[48]>>>18,n[0]=he^~le&ge,n[1]=fe^~pe&me,n[10]=ve^~ke&Oe,n[11]=Se^~Me&Re,n[20]=Be^~Fe&xe,n[21]=Ce^~Ne&Pe,n[30]=Ue^~He&$e,n[31]=De^~Ve&Je,n[40]=Xe^~Ze&tt,n[41]=Ye^~et&rt,n[2]=le^~ge&be,n[3]=pe^~me&_e,n[12]=ke^~Oe&Ee,n[13]=Me^~Re&Ie,n[22]=Fe^~xe&qe,n[23]=Ne^~Pe&Le,n[32]=He^~$e&Ge,n[33]=Ve^~Je&ze,n[42]=Ze^~tt&nt,n[43]=et^~rt&st,n[4]=ge^~be&we,n[5]=me^~_e&ye,n[14]=Oe^~Ee&Ae,n[15]=Re^~Ie&Te,n[24]=xe^~qe&We,n[25]=Pe^~Le&je,n[34]=$e^~Ge&Ke,n[35]=Je^~ze&Qe,n[44]=tt^~nt&it,n[45]=rt^~st&ot,n[6]=be^~we&he,n[7]=_e^~ye&fe,n[16]=Ee^~Ae&ve,n[17]=Ie^~Te&Se,n[26]=qe^~We&Be,n[27]=Le^~je&Ce,n[36]=Ge^~Ke&Ue,n[37]=ze^~Qe&De,n[46]=nt^~it&Xe,n[47]=st^~ot&Ye,n[8]=we^~he&le,n[9]=ye^~fe&pe,n[18]=Ae^~ve&ke,n[19]=Te^~Se&Me,n[28]=We^~Be&Fe,n[29]=je^~Ce&Ne,n[38]=Ke^~Ue&He,n[39]=Qe^~De&Ve,n[48]=it^~Xe&Ze,n[49]=ot^~Ye&et,n[0]^=j[f],n[1]^=j[f+1]};if(S)t.exports=U;else for(D=0;D<te.length;++D)i[te[D]]=U[te[D]]})()})(ir);var Cn=ir.exports;function at(t){return nr(t)}function Fn(t){return On(ee(t))}const Nn=yr;function pt(){return((e,r)=>{for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r})()}function xn(t){return t===""||typeof t=="string"&&t.trim()===""}function Pn(t){return!(t&&t.length)}function or(t,e){return vn(t)}function qn(t){return typeof t.method<"u"}function se(t){return typeof t.result<"u"}function ut(t){return typeof t.error<"u"}function Pt(t){return typeof t.event<"u"}function Ln(t){return an.includes(t)||t.startsWith("wc_")}function Wn(t){return t.method.startsWith("wc_")?!0:!Qt.includes(t.method)}function jn(t){t=V(t.toLowerCase());const e=V(Cn.keccak_256(An(t)));let r="";for(let s=0;s<t.length;s++)parseInt(e[s],16)>7?r+=t[s].toUpperCase():r+=t[s];return ee(r)}const Un=t=>t?t.toLowerCase().substring(0,2)!=="0x"?!1:/^(0x)?[0-9a-f]{40}$/i.test(t)?/^(0x)?[0-9a-f]{40}$/.test(t)||/^(0x)?[0-9A-F]{40}$/.test(t)?!0:t===jn(t):!1:!1;function qt(t){return!Pn(t)&&!or(t[0])&&(t[0]=Tn(t[0])),t}function gt(t){if(typeof t.type<"u"&&t.type!=="0")return t;if(typeof t.from>"u"||!Un(t.from))throw new Error("Transaction object must include a valid 'from' value.");function e(i){let d=i;return(typeof i=="number"||typeof i=="string"&&!xn(i))&&(or(i)?typeof i=="string"&&(d=at(i)):d=sr(i)),typeof d=="string"&&(d=Fn(d)),d}const r={from:at(t.from),to:typeof t.to>"u"?void 0:at(t.to),gasPrice:typeof t.gasPrice>"u"?"":e(t.gasPrice),gas:typeof t.gas>"u"?typeof t.gasLimit>"u"?"":e(t.gasLimit):e(t.gas),value:typeof t.value>"u"?"":e(t.value),nonce:typeof t.nonce>"u"?"":e(t.nonce),data:typeof t.data>"u"?"":at(t.data)||"0x"},s=["gasPrice","gas","value","nonce"];return Object.keys(r).forEach(i=>{(typeof r[i]>"u"||typeof r[i]=="string"&&!r[i].trim().length)&&s.includes(i)&&delete r[i]}),r}function Dn(t){const e=t.message||"Failed or Rejected Request";let r=-32e3;if(t&&!t.code)switch(e){case"Parse error":r=-32700;break;case"Invalid request":r=-32600;break;case"Method not found":r=-32601;break;case"Invalid params":r=-32602;break;case"Internal error":r=-32603;break;default:r=-32e3;break}const s={code:r,message:e};return t.data&&(s.data=t.data),s}var Rt={},Hn=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),ar="%[a-f0-9]{2}",Lt=new RegExp("("+ar+")|([^%]+?)","gi"),Wt=new RegExp("("+ar+")+","gi");function _t(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),s=t.slice(e);return Array.prototype.concat.call([],_t(r),_t(s))}function Vn(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Lt)||[],r=1;r<e.length;r++)t=_t(e,r).join(""),e=t.match(Lt)||[];return t}}function $n(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=Wt.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var s=Vn(r[0]);s!==r[0]&&(e[r[0]]=s)}r=Wt.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),d=0;d<i.length;d++){var b=i[d];t=t.replace(new RegExp(b,"g"),e[b])}return t}var Jn=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return $n(t)}},Gn=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]};(function(t){const e=Hn,r=Jn,s=Gn,i=o=>o==null;function d(o){switch(o.arrayFormat){case"index":return h=>(g,l)=>{const k=g.length;return l===void 0||o.skipNull&&l===null||o.skipEmptyString&&l===""?g:l===null?[...g,[m(h,o),"[",k,"]"].join("")]:[...g,[m(h,o),"[",m(k,o),"]=",m(l,o)].join("")]};case"bracket":return h=>(g,l)=>l===void 0||o.skipNull&&l===null||o.skipEmptyString&&l===""?g:l===null?[...g,[m(h,o),"[]"].join("")]:[...g,[m(h,o),"[]=",m(l,o)].join("")];case"comma":case"separator":return h=>(g,l)=>l==null||l.length===0?g:g.length===0?[[m(h,o),"=",m(l,o)].join("")]:[[g,m(l,o)].join(o.arrayFormatSeparator)];default:return h=>(g,l)=>l===void 0||o.skipNull&&l===null||o.skipEmptyString&&l===""?g:l===null?[...g,m(h,o)]:[...g,[m(h,o),"=",m(l,o)].join("")]}}function b(o){let h;switch(o.arrayFormat){case"index":return(g,l,k)=>{if(h=/\[(\d*)\]$/.exec(g),g=g.replace(/\[\d*\]$/,""),!h){k[g]=l;return}k[g]===void 0&&(k[g]={}),k[g][h[1]]=l};case"bracket":return(g,l,k)=>{if(h=/(\[\])$/.exec(g),g=g.replace(/\[\]$/,""),!h){k[g]=l;return}if(k[g]===void 0){k[g]=[l];return}k[g]=[].concat(k[g],l)};case"comma":case"separator":return(g,l,k)=>{const M=typeof l=="string"&&l.split("").indexOf(o.arrayFormatSeparator)>-1?l.split(o.arrayFormatSeparator).map(W=>O(W,o)):l===null?l:O(l,o);k[g]=M};default:return(g,l,k)=>{if(k[g]===void 0){k[g]=l;return}k[g]=[].concat(k[g],l)}}}function S(o){if(typeof o!="string"||o.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function m(o,h){return h.encode?h.strict?e(o):encodeURIComponent(o):o}function O(o,h){return h.decode?r(o):o}function F(o){return Array.isArray(o)?o.sort():typeof o=="object"?F(Object.keys(o)).sort((h,g)=>Number(h)-Number(g)).map(h=>o[h]):o}function I(o){const h=o.indexOf("#");return h!==-1&&(o=o.slice(0,h)),o}function N(o){let h="";const g=o.indexOf("#");return g!==-1&&(h=o.slice(g)),h}function q(o){o=I(o);const h=o.indexOf("?");return h===-1?"":o.slice(h+1)}function T(o,h){return h.parseNumbers&&!Number.isNaN(Number(o))&&typeof o=="string"&&o.trim()!==""?o=Number(o):h.parseBooleans&&o!==null&&(o.toLowerCase()==="true"||o.toLowerCase()==="false")&&(o=o.toLowerCase()==="true"),o}function j(o,h){h=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},h),S(h.arrayFormatSeparator);const g=b(h),l=Object.create(null);if(typeof o!="string"||(o=o.trim().replace(/^[?#&]/,""),!o))return l;for(const k of o.split("&")){let[B,M]=s(h.decode?k.replace(/\+/g," "):k,"=");M=M===void 0?null:["comma","separator"].includes(h.arrayFormat)?M:O(M,h),g(O(B,h),M,l)}for(const k of Object.keys(l)){const B=l[k];if(typeof B=="object"&&B!==null)for(const M of Object.keys(B))B[M]=T(B[M],h);else l[k]=T(B,h)}return h.sort===!1?l:(h.sort===!0?Object.keys(l).sort():Object.keys(l).sort(h.sort)).reduce((k,B)=>{const M=l[B];return M&&typeof M=="object"&&!Array.isArray(M)?k[B]=F(M):k[B]=M,k},Object.create(null))}t.extract=q,t.parse=j,t.stringify=(o,h)=>{if(!o)return"";h=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},h),S(h.arrayFormatSeparator);const g=M=>h.skipNull&&i(o[M])||h.skipEmptyString&&o[M]==="",l=d(h),k={};for(const M of Object.keys(o))g(M)||(k[M]=o[M]);const B=Object.keys(k);return h.sort!==!1&&B.sort(h.sort),B.map(M=>{const W=o[M];return W===void 0?"":W===null?m(M,h):Array.isArray(W)?W.reduce(l(M),[]).join("&"):m(M,h)+"="+m(W,h)}).filter(M=>M.length>0).join("&")},t.parseUrl=(o,h)=>{h=Object.assign({decode:!0},h);const[g,l]=s(o,"#");return Object.assign({url:g.split("?")[0]||"",query:j(q(o),h)},h&&h.parseFragmentIdentifier&&l?{fragmentIdentifier:O(l,h)}:{})},t.stringifyUrl=(o,h)=>{h=Object.assign({encode:!0,strict:!0},h);const g=I(o.url).split("?")[0]||"",l=t.extract(o.url),k=t.parse(l,{sort:!1}),B=Object.assign(k,o.query);let M=t.stringify(B,h);M&&(M=`?${M}`);let W=N(o.url);return o.fragmentIdentifier&&(W=`#${m(o.fragmentIdentifier,h)}`),`${g}${M}${W}`}})(Rt);function zn(t){const e=t.indexOf("?")!==-1?t.indexOf("?"):void 0;return typeof e<"u"?t.substr(e):""}function Kn(t,e){let r=cr(t);return r=Object.assign(Object.assign({},r),e),t=Qn(r),t}function cr(t){return Rt.parse(t)}function Qn(t){return Rt.stringify(t)}function Xn(t){return typeof t.bridge<"u"}function Yn(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,s=t.substring(0,e),i=t.substring(e+1,r);function d(I){const q=I.split("@");return{handshakeTopic:q[0],version:parseInt(q[1],10)}}const b=d(i),S=typeof r<"u"?t.substr(r):"";function m(I){const N=cr(I);return{key:N.key||"",bridge:N.bridge||""}}const O=m(S);return Object.assign(Object.assign({protocol:s},b),O)}class Zn{constructor(){this._eventEmitters=[],typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(e,r){this._eventEmitters.push({event:e,callback:r})}trigger(e){let r=[];e&&(r=this._eventEmitters.filter(s=>s.event===e)),r.forEach(s=>{s.callback()})}}const es=typeof globalThis.WebSocket<"u"?globalThis.WebSocket:vr();class ts{constructor(e){if(this.opts=e,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=e.protocol,this._version=e.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=e.subscriptions||[],this._netMonitor=e.netMonitor||new Zn,!e.url||typeof e.url!="string")throw new Error("Missing or invalid WebSocket url");this._url=e.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(e){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(e){}get connecting(){return this.readyState===0}set connected(e){}get connected(){return this.readyState===1}set closing(e){}get closing(){return this.readyState===2}set closed(e){}get closed(){return this.readyState===3}open(){this._socketCreate()}close(){this._socketClose()}send(e,r,s){if(!r||typeof r!="string")throw new Error("Missing or invalid topic field");this._socketSend({topic:r,type:"pub",payload:e,silent:!!s})}subscribe(e){this._socketSend({topic:e,type:"sub",payload:"",silent:!0})}on(e,r){this._events.push({event:e,callback:r})}_socketCreate(){if(this._nextSocket)return;const e=rs(this._url,this._protocol,this._version);if(this._nextSocket=new es(e),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=r=>this._socketReceive(r),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=r=>this._socketError(r),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(e){const r=JSON.stringify(e);this._socket&&this._socket.readyState===1?this._socket.send(r):(this._setToQueue(e),this._socketCreate())}async _socketReceive(e){let r;try{r=JSON.parse(e.data)}catch{return}if(this._socketSend({topic:r.topic,type:"ack",payload:"",silent:!0}),this._socket&&this._socket.readyState===1){const s=this._events.filter(i=>i.event==="message");s&&s.length&&s.forEach(i=>i.callback(r))}}_socketError(e){const r=this._events.filter(s=>s.event==="error");r&&r.length&&r.forEach(s=>s.callback(e))}_queueSubscriptions(){this._subscriptions.forEach(r=>this._queue.push({topic:r,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(e){this._queue.push(e)}_pushQueue(){this._queue.forEach(r=>this._socketSend(r)),this._queue=[]}}function rs(t,e,r){var s,i;const b=(t.startsWith("https")?t.replace("https","wss"):t.startsWith("http")?t.replace("http","ws"):t).split("?"),S=Yr()?{protocol:e,version:r,env:"browser",host:((s=en())===null||s===void 0?void 0:s.host)||""}:{protocol:e,version:r,env:((i=vt())===null||i===void 0?void 0:i.name)||""},m=Kn(zn(b[1]||""),S);return b[0]+"?"+m}const mt="Session currently connected",J="Session currently disconnected",ns="Session Rejected",ss="Missing JSON RPC response",is='JSON-RPC success response must include "result" field',os='JSON-RPC error response must include "error" field',as='JSON RPC request must have valid "method" value',cs='JSON RPC request must have valid "id" value',us="Missing one of the required parameters: bridge / uri / session",jt="JSON RPC response format is invalid",ds="URI format is invalid",hs="QRCode Modal not provided",Ut="User close QRCode Modal";class fs{constructor(){this._eventEmitters=[]}subscribe(e){this._eventEmitters.push(e)}unsubscribe(e){this._eventEmitters=this._eventEmitters.filter(r=>r.event!==e)}trigger(e){let r=[],s;qn(e)?s=e.method:se(e)||ut(e)?s=`response:${e.id}`:Pt(e)?s=e.event:s="",s&&(r=this._eventEmitters.filter(i=>i.event===s)),(!r||!r.length)&&!Ln(s)&&!Pt(s)&&(r=this._eventEmitters.filter(i=>i.event==="call_request")),r.forEach(i=>{if(ut(e)){const d=new Error(e.error.message);i.callback(d,null)}else i.callback(null,e)})}}class ls{constructor(e="walletconnect"){this.storageId=e}getSession(){let e=null;const r=zt(this.storageId);return r&&Xn(r)&&(e=r),e}setSession(e){return on(this.storageId,e),e}removeSession(){Kt(this.storageId)}}const ps="walletconnect.org",gs="abcdefghijklmnopqrstuvwxyz0123456789",ur=gs.split("").map(t=>`https://${t}.bridge.walletconnect.org`);function ms(t){let e=t.indexOf("//")>-1?t.split("/")[2]:t.split("/")[0];return e=e.split(":")[0],e=e.split("?")[0],e}function bs(t){return ms(t).split(".").slice(-2).join(".")}function _s(){return Math.floor(Math.random()*ur.length)}function ws(){return ur[_s()]}function ys(t){return bs(t)===ps}function vs(t){return ys(t)?ws():t}class Ss{constructor(e){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new fs,this._clientMeta=Nt()||e.connectorOpts.clientMeta||null,this._cryptoLib=e.cryptoLib,this._sessionStorage=e.sessionStorage||new ls(e.connectorOpts.storageId),this._qrcodeModal=e.connectorOpts.qrcodeModal,this._qrcodeModalOptions=e.connectorOpts.qrcodeModalOptions,this._signingMethods=[...Qt,...e.connectorOpts.signingMethods||[]],!e.connectorOpts.bridge&&!e.connectorOpts.uri&&!e.connectorOpts.session)throw new Error(us);e.connectorOpts.bridge&&(this.bridge=vs(e.connectorOpts.bridge)),e.connectorOpts.uri&&(this.uri=e.connectorOpts.uri);const r=e.connectorOpts.session||this._getStorageSession();r&&(this.session=r),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=e.transport||new ts({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),e.connectorOpts.uri&&this._subscribeToSessionRequest(),e.pushServerOpts&&this._registerPushServer(e.pushServerOpts)}set bridge(e){e&&(this._bridge=e)}get bridge(){return this._bridge}set key(e){if(!e)return;const r=Bn(e);this._key=r}get key(){return this._key?En(this._key):""}set clientId(e){e&&(this._clientId=e)}get clientId(){let e=this._clientId;return e||(e=this._clientId=pt()),this._clientId}set peerId(e){e&&(this._peerId=e)}get peerId(){return this._peerId}set clientMeta(e){}get clientMeta(){let e=this._clientMeta;return e||(e=this._clientMeta=Nt()),e}set peerMeta(e){this._peerMeta=e}get peerMeta(){return this._peerMeta}set handshakeTopic(e){e&&(this._handshakeTopic=e)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(e){e&&(this._handshakeId=e)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(e){if(!e)return;const{handshakeTopic:r,bridge:s,key:i}=this._parseUri(e);this.handshakeTopic=r,this.bridge=s,this.key=i}set chainId(e){this._chainId=e}get chainId(){return this._chainId}set networkId(e){this._networkId=e}get networkId(){return this._networkId}set accounts(e){this._accounts=e}get accounts(){return this._accounts}set rpcUrl(e){this._rpcUrl=e}get rpcUrl(){return this._rpcUrl}set connected(e){}get connected(){return this._connected}set pending(e){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(e){e&&(this._connected=e.connected,this.accounts=e.accounts,this.chainId=e.chainId,this.bridge=e.bridge,this.key=e.key,this.clientId=e.clientId,this.clientMeta=e.clientMeta,this.peerId=e.peerId,this.peerMeta=e.peerMeta,this.handshakeId=e.handshakeId,this.handshakeTopic=e.handshakeTopic)}on(e,r){const s={event:e,callback:r};this._eventManager.subscribe(s)}off(e){this._eventManager.unsubscribe(e)}async createInstantRequest(e){this._key=await this._generateKey();const r=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(e)}]});this.handshakeId=r.id,this.handshakeTopic=pt(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",()=>{throw new Error(Ut)});const s=()=>{this.killSession()};try{const i=await this._sendCallRequest(r);return i&&s(),i}catch(i){throw s(),i}}async connect(e){if(!this._qrcodeModal)throw new Error(hs);return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(e),new Promise(async(r,s)=>{this.on("modal_closed",()=>s(new Error(Ut))),this.on("connect",(i,d)=>{if(i)return s(i);r(d.params[0])})}))}async createSession(e){if(this._connected)throw new Error(mt);if(this.pending)return;this._key=await this._generateKey();const r=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:e&&e.chainId?e.chainId:null}]});this.handshakeId=r.id,this.handshakeTopic=pt(),this._sendSessionRequest(r,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(e){if(this._connected)throw new Error(mt);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const r={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},s={id:this.handshakeId,jsonrpc:"2.0",result:r};this._sendResponse(s),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(e){if(this._connected)throw new Error(mt);const r=e&&e.message?e.message:ns,s=this._formatResponse({id:this.handshakeId,error:{message:r}});this._sendResponse(s),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:r}]}),this._removeStorageSession()}updateSession(e){if(!this._connected)throw new Error(J);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const r={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},s=this._formatRequest({method:"wc_sessionUpdate",params:[r]});this._sendSessionRequest(s,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(e){const r=e?e.message:"Session Disconnected",s={approved:!1,chainId:null,networkId:null,accounts:null},i=this._formatRequest({method:"wc_sessionUpdate",params:[s]});await this._sendRequest(i),this._handleSessionDisconnect(r)}async sendTransaction(e){if(!this._connected)throw new Error(J);const r=gt(e),s=this._formatRequest({method:"eth_sendTransaction",params:[r]});return await this._sendCallRequest(s)}async signTransaction(e){if(!this._connected)throw new Error(J);const r=gt(e),s=this._formatRequest({method:"eth_signTransaction",params:[r]});return await this._sendCallRequest(s)}async signMessage(e){if(!this._connected)throw new Error(J);const r=this._formatRequest({method:"eth_sign",params:e});return await this._sendCallRequest(r)}async signPersonalMessage(e){if(!this._connected)throw new Error(J);e=qt(e);const r=this._formatRequest({method:"personal_sign",params:e});return await this._sendCallRequest(r)}async signTypedData(e){if(!this._connected)throw new Error(J);const r=this._formatRequest({method:"eth_signTypedData",params:e});return await this._sendCallRequest(r)}async updateChain(e){if(!this._connected)throw new Error("Session currently disconnected");const r=this._formatRequest({method:"wallet_updateChain",params:[e]});return await this._sendCallRequest(r)}unsafeSend(e,r){return this._sendRequest(e,r),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:r}]}),new Promise((s,i)=>{this._subscribeToResponse(e.id,(d,b)=>{if(d){i(d);return}if(!b)throw new Error(ss);s(b)})})}async sendCustomRequest(e,r){if(!this._connected)throw new Error(J);switch(e.method){case"eth_accounts":return this.accounts;case"eth_chainId":return sr(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":e.params&&(e.params[0]=gt(e.params[0]));break;case"personal_sign":e.params&&(e.params=qt(e.params));break}const s=this._formatRequest(e);return await this._sendCallRequest(s,r)}approveRequest(e){if(se(e)){const r=this._formatResponse(e);this._sendResponse(r)}else throw new Error(is)}rejectRequest(e){if(ut(e)){const r=this._formatResponse(e);this._sendResponse(r)}else throw new Error(os)}transportClose(){this._transport.close()}async _sendRequest(e,r){const s=this._formatRequest(e),i=await this._encrypt(s),d=typeof(r==null?void 0:r.topic)<"u"?r.topic:this.peerId,b=JSON.stringify(i),S=typeof(r==null?void 0:r.forcePushNotification)<"u"?!r.forcePushNotification:Wn(s);this._transport.send(b,d,S)}async _sendResponse(e){const r=await this._encrypt(e),s=this.peerId,i=JSON.stringify(r);this._transport.send(i,s,!0)}async _sendSessionRequest(e,r,s){this._sendRequest(e,s),this._subscribeToSessionResponse(e.id,r)}_sendCallRequest(e,r){return this._sendRequest(e,r),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:r}]}),this._subscribeToCallResponse(e.id)}_formatRequest(e){if(typeof e.method>"u")throw new Error(as);return{id:typeof e.id>"u"?Nn():e.id,jsonrpc:"2.0",method:e.method,params:typeof e.params>"u"?[]:e.params}}_formatResponse(e){if(typeof e.id>"u")throw new Error(cs);const r={id:e.id,jsonrpc:"2.0"};if(ut(e)){const s=Dn(e.error);return Object.assign(Object.assign(Object.assign({},r),e),{error:s})}else if(se(e))return Object.assign(Object.assign({},r),e);throw new Error(jt)}_handleSessionDisconnect(e){const r=e||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),Kt(xt)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:r}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(e,r){r?r.approved?(this._connected?(r.chainId&&(this.chainId=r.chainId),r.accounts&&(this.accounts=r.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,r.chainId&&(this.chainId=r.chainId),r.accounts&&(this.accounts=r.accounts),r.peerId&&!this.peerId&&(this.peerId=r.peerId),r.peerMeta&&!this.peerMeta&&(this.peerMeta=r.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(e):this._handleSessionDisconnect(e)}async _handleIncomingMessages(e){if(![this.clientId,this.handshakeTopic].includes(e.topic))return;let s;try{s=JSON.parse(e.payload)}catch{return}const i=await this._decrypt(s);i&&this._eventManager.trigger(i)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(e,r){this.on(`response:${e}`,r)}_subscribeToSessionResponse(e,r){this._subscribeToResponse(e,(s,i)=>{if(s){this._handleSessionResponse(s.message);return}se(i)?this._handleSessionResponse(r,i.result):i.error&&i.error.message?this._handleSessionResponse(i.error.message):this._handleSessionResponse(r)})}_subscribeToCallResponse(e){return new Promise((r,s)=>{this._subscribeToResponse(e,(i,d)=>{if(i){s(i);return}se(d)?r(d.result):d.error&&d.error.message?s(d.error):s(new Error(jt))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(e,r)=>{const{request:s}=r.params[0];if(Qr()&&this._signingMethods.includes(s.method)){const i=zt(xt);i&&(window.location.href=i.href)}}),this.on("wc_sessionRequest",(e,r)=>{e&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:e.toString()}]}),this.handshakeId=r.id,this.peerId=r.params[0].peerId,this.peerMeta=r.params[0].peerMeta;const s=Object.assign(Object.assign({},r),{method:"session_request"});this._eventManager.trigger(s)}),this.on("wc_sessionUpdate",(e,r)=>{e&&this._handleSessionResponse(e.message),this._handleSessionResponse("Session disconnected",r.params[0])})}_initTransport(){this._transport.on("message",e=>this._handleIncomingMessages(e)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){const e=this.protocol,r=this.handshakeTopic,s=this.version,i=encodeURIComponent(this.bridge),d=this.key;return`${e}:${r}@${s}?bridge=${i}&key=${d}`}_parseUri(e){const r=Yn(e);if(r.protocol===this.protocol){if(!r.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const s=r.handshakeTopic;if(!r.bridge)throw Error("Invalid or missing bridge url parameter value");const i=decodeURIComponent(r.bridge);if(!r.key)throw Error("Invalid or missing key parameter value");const d=r.key;return{handshakeTopic:s,bridge:i,key:d}}else throw new Error(ds)}async _generateKey(){return this._cryptoLib?await this._cryptoLib.generateKey():null}async _encrypt(e){const r=this._key;return this._cryptoLib&&r?await this._cryptoLib.encrypt(e,r):null}async _decrypt(e){const r=this._key;return this._cryptoLib&&r?await this._cryptoLib.decrypt(e,r):null}_getStorageSession(){let e=null;return this._sessionStorage&&(e=this._sessionStorage.getSession()),e}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(e){if(!e.url||typeof e.url!="string")throw Error("Invalid or missing pushServerOpts.url parameter value");if(!e.type||typeof e.type!="string")throw Error("Invalid or missing pushServerOpts.type parameter value");if(!e.token||typeof e.token!="string")throw Error("Invalid or missing pushServerOpts.token parameter value");const r={bridge:this.bridge,topic:this.clientId,type:e.type,token:e.token,peerName:"",language:e.language||""};this.on("connect",async(s,i)=>{if(s)throw s;if(e.peerMeta){const d=i.params[0].peerMeta.name;r.peerName=d}try{if(!(await(await fetch(`${e.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})).json()).success)throw Error("Failed to register in Push Server")}catch{throw Error("Failed to register in Push Server")}})}}function ks(t){return ie.getBrowerCrypto().getRandomValues(new Uint8Array(t))}const dr=256,hr=dr,Ms=dr,$="AES-CBC",Os=`SHA-${hr}`,wt="HMAC",Rs="encrypt",Es="decrypt",Is="sign",As="verify";function Ts(t){return t===$?{length:hr,name:$}:{hash:{name:Os},name:wt}}function Bs(t){return t===$?[Rs,Es]:[Is,As]}async function Et(t,e=$){return ie.getSubtleCrypto().importKey("raw",t,Ts(e),!0,Bs(e))}async function Cs(t,e,r){const s=ie.getSubtleCrypto(),i=await Et(e,$),d=await s.encrypt({iv:t,name:$},i,r);return new Uint8Array(d)}async function Fs(t,e,r){const s=ie.getSubtleCrypto(),i=await Et(e,$),d=await s.decrypt({iv:t,name:$},i,r);return new Uint8Array(d)}async function Ns(t,e){const r=ie.getSubtleCrypto(),s=await Et(t,wt),i=await r.sign({length:Ms,name:wt},s,e);return new Uint8Array(i)}function xs(t,e,r){return Cs(t,e,r)}function Ps(t,e,r){return Fs(t,e,r)}async function fr(t,e){return await Ns(t,e)}async function lr(t){const e=(t||256)/8,r=ks(e);return In(ht(r))}async function pr(t,e){const r=X(t.data),s=X(t.iv),i=X(t.hmac),d=Q(i,!1),b=rr(r,s),S=await fr(e,b),m=Q(S,!1);return V(d)===V(m)}async function qs(t,e,r){const s=Y(bt(e)),i=r||await lr(128),d=Y(bt(i)),b=Q(d,!1),S=JSON.stringify(t),m=wn(S),O=await xs(d,s,m),F=Q(O,!1),I=rr(O,d),N=await fr(s,I),q=Q(N,!1);return{data:F,hmac:q,iv:b}}async function Ls(t,e){const r=Y(bt(e));if(!r)throw new Error("Missing key: required for decryption");if(!await pr(t,r))return null;const i=X(t.data),d=X(t.iv),b=await Ps(d,r,i),S=bn(b);let m;try{m=JSON.parse(S)}catch{return null}return m}const Ws=Object.freeze(Object.defineProperty({__proto__:null,decrypt:Ls,encrypt:qs,generateKey:lr,verifyHmac:pr},Symbol.toStringTag,{value:"Module"}));class Gs extends Ss{constructor(e,r){super({cryptoLib:Ws,connectorOpts:e,pushServerOpts:r})}}const js={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},gr={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},C={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},L={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},H={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class a{static getFirstMatch(e,r){const s=r.match(e);return s&&s.length>0&&s[1]||""}static getSecondMatch(e,r){const s=r.match(e);return s&&s.length>1&&s[2]||""}static matchAndReturnConst(e,r,s){if(e.test(r))return s}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const r=e.split(".").splice(0,2).map(s=>parseInt(s,10)||0);if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const r=e.split(".").splice(0,2).map(s=>parseInt(s,10)||0);if(r.push(0),!(r[0]===1&&r[1]<5)){if(r[0]===1&&r[1]<6)return"Cupcake";if(r[0]===1&&r[1]>=6)return"Donut";if(r[0]===2&&r[1]<2)return"Eclair";if(r[0]===2&&r[1]===2)return"Froyo";if(r[0]===2&&r[1]>2)return"Gingerbread";if(r[0]===3)return"Honeycomb";if(r[0]===4&&r[1]<1)return"Ice Cream Sandwich";if(r[0]===4&&r[1]<4)return"Jelly Bean";if(r[0]===4&&r[1]>=4)return"KitKat";if(r[0]===5)return"Lollipop";if(r[0]===6)return"Marshmallow";if(r[0]===7)return"Nougat";if(r[0]===8)return"Oreo";if(r[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,r,s=!1){const i=a.getVersionPrecision(e),d=a.getVersionPrecision(r);let b=Math.max(i,d),S=0;const m=a.map([e,r],O=>{const F=b-a.getVersionPrecision(O),I=O+new Array(F+1).join(".0");return a.map(I.split("."),N=>new Array(20-N.length).join("0")+N).reverse()});for(s&&(S=b-Math.min(i,d)),b-=1;b>=S;){if(m[0][b]>m[1][b])return 1;if(m[0][b]===m[1][b]){if(b===S)return 0;b-=1}else if(m[0][b]<m[1][b])return-1}}static map(e,r){const s=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,r);for(i=0;i<e.length;i+=1)s.push(r(e[i]));return s}static find(e,r){let s,i;if(Array.prototype.find)return Array.prototype.find.call(e,r);for(s=0,i=e.length;s<i;s+=1){const d=e[s];if(r(d,s))return d}}static assign(e,...r){const s=e;let i,d;if(Object.assign)return Object.assign(e,...r);for(i=0,d=r.length;i<d;i+=1){const b=r[i];typeof b=="object"&&b!==null&&Object.keys(b).forEach(m=>{s[m]=b[m]})}return e}static getBrowserAlias(e){return js[e]}static getBrowserTypeByAlias(e){return gr[e]||""}}const R=/version\/(\d+(\.?_?\d+)+)/i,Us=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},r=a.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},r=a.getFirstMatch(R,t)||a.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},r=a.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},r=a.getFirstMatch(R,t)||a.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},r=a.getFirstMatch(R,t)||a.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},r=a.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},r=a.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},r=a.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},r=a.getFirstMatch(R,t)||a.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},r=a.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},r=a.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},r=a.getFirstMatch(R,t)||a.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},r=a.getFirstMatch(R,t)||a.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},r=a.getFirstMatch(R,t)||a.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},r=a.getFirstMatch(R,t)||a.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},r=a.getFirstMatch(R,t)||a.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},r=a.getFirstMatch(R,t)||a.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},r=a.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},r=a.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},r=a.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},r=a.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},r=a.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},r=a.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},r=a.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},r=a.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return r&&(e.version=r),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},r=a.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},r=a.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},r=a.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},r=a.getFirstMatch(R,t)||a.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},r=a.getFirstMatch(R,t)||a.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},r=a.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},r=a.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},r=a.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},r=a.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},r=a.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},r=a.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},r=a.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},r=a.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},r=a.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test(t){const e=!t.test(/like android/i),r=t.test(/android/i);return e&&r},describe(t){const e={name:"Android Browser"},r=a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},r=a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},r=a.getFirstMatch(R,t);return r&&(e.version=r),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,i=t.search("\\(")!==-1?r:e;return{name:a.getFirstMatch(i,t),version:a.getSecondMatch(i,t)}}}],Ds=[{test:[/Roku\/DVP/],describe(t){const e=a.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:L.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=a.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:L.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=a.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),r=a.getWindowsVersionName(e);return{name:L.Windows,version:e,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:L.iOS},r=a.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return r&&(e.version=r),e}},{test:[/macintosh/i],describe(t){const e=a.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),r=a.getMacOSVersionName(e),s={name:L.MacOS,version:e};return r&&(s.versionName=r),s}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=a.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:L.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),r=t.test(/android/i);return e&&r},describe(t){const e=a.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),r=a.getAndroidVersionName(e),s={name:L.Android,version:e};return r&&(s.versionName=r),s}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=a.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),r={name:L.WebOS};return e&&e.length&&(r.version=e),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=a.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||a.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||a.getFirstMatch(/\bbb(\d+)/i,t);return{name:L.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=a.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:L.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=a.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:L.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:L.Linux}}},{test:[/CrOS/],describe(){return{name:L.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=a.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:L.PlayStation4,version:e}}}],Hs=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=a.getFirstMatch(/(can-l01)/i,t)&&"Nova",r={type:C.mobile,vendor:"Huawei"};return e&&(r.model=e),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:C.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:C.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:C.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:C.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:C.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:C.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),r=t.test(/like (ipod|iphone)/i);return e&&!r},describe(t){const e=a.getFirstMatch(/(ipod|iphone)/i,t);return{type:C.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:C.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:C.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:C.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:C.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:C.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:C.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:C.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:C.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:C.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:C.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:C.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:C.tv}}}],Vs=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:H.Blink};const r=a.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:H.EdgeHTML,version:r}}},{test:[/trident/i],describe(t){const e={name:H.Trident},r=a.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:H.Presto},r=a.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test(t){const e=t.test(/gecko/i),r=t.test(/like gecko/i);return e&&!r},describe(t){const e={name:H.Gecko},r=a.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:H.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:H.WebKit},r=a.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}}];class Dt{constructor(e,r=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},r!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=a.find(Us,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(s=>this.test(s));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=a.find(Ds,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(s=>this.test(s));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:r}=this.getOS();return e?String(r).toLowerCase()||"":r||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:r}=this.getPlatform();return e?String(r).toLowerCase()||"":r||""}parsePlatform(){this.parsedResult.platform={};const e=a.find(Hs,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(s=>this.test(s));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=a.find(Vs,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(s=>this.test(s));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return a.assign({},this.parsedResult)}satisfies(e){const r={};let s=0;const i={};let d=0;if(Object.keys(e).forEach(S=>{const m=e[S];typeof m=="string"?(i[S]=m,d+=1):typeof m=="object"&&(r[S]=m,s+=1)}),s>0){const S=Object.keys(r),m=a.find(S,F=>this.isOS(F));if(m){const F=this.satisfies(r[m]);if(F!==void 0)return F}const O=a.find(S,F=>this.isPlatform(F));if(O){const F=this.satisfies(r[O]);if(F!==void 0)return F}}if(d>0){const S=Object.keys(i),m=a.find(S,O=>this.isBrowser(O,!0));if(m!==void 0)return this.compareVersion(i[m])}}isBrowser(e,r=!1){const s=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const d=a.getBrowserTypeByAlias(i);return r&&d&&(i=d.toLowerCase()),i===s}compareVersion(e){let r=[0],s=e,i=!1;const d=this.getBrowserVersion();if(typeof d=="string")return e[0]===">"||e[0]==="<"?(s=e.substr(1),e[1]==="="?(i=!0,s=e.substr(2)):r=[],e[0]===">"?r.push(1):r.push(-1)):e[0]==="="?s=e.substr(1):e[0]==="~"&&(i=!0,s=e.substr(1)),r.indexOf(a.compareVersions(d,s,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,r=!1){return this.isBrowser(e,r)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(r=>this.is(r))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class zs{static getParser(e,r=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new Dt(e,r)}static parse(e){return new Dt(e).getResult()}static get BROWSER_MAP(){return gr}static get ENGINE_MAP(){return H}static get OS_MAP(){return L}static get PLATFORMS_MAP(){return C}}export{zs as B,Gs as W};
